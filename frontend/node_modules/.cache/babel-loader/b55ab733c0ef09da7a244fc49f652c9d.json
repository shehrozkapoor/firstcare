{"ast":null,"code":"import { defineComponent, ref, computed, onMounted, onUnmounted, watch, nextTick, openBlock, createElementBlock, withModifiers, createCommentVNode, createElementVNode, normalizeClass, renderSlot, toDisplayString, withDirectives, withKeys, vModelText, resolveComponent, Fragment, renderList, createVNode, withCtx, normalizeProps, guardReactiveProps, createSlots } from 'vue';\n/**\n * This recursive call is used to traverse a folder looking for all children of a particular type\n * @param parent\n * @param expectedType\n * @returns\n */\n\nconst cascadeStateToDescendants = (item, state) => {\n  var _item$children;\n\n  (_item$children = item.children) === null || _item$children === void 0 ? void 0 : _item$children.forEach(child => {\n    child.checkedStatus = item.checkedStatus;\n    state.emitItemCheckedChange(child);\n    cascadeStateToDescendants(child, state);\n  });\n};\n\nconst notifyParentOfSelection = (child, state) => {\n  var _parent$children, _parent$children2, _parent$children3, _parent$children4;\n\n  if (!child) return;\n  const parent = state.getParent(child.id);\n  if (!parent) return;\n  const isEveryChildChecked = (_parent$children = parent.children) === null || _parent$children === void 0 ? void 0 : _parent$children.every(child => child.checkedStatus == 'true');\n  const hasIntermediate = (_parent$children2 = parent.children) === null || _parent$children2 === void 0 ? void 0 : _parent$children2.some(child => child.checkedStatus == 'indeterminate');\n  const hasAnUncheckedChild = (_parent$children3 = parent.children) === null || _parent$children3 === void 0 ? void 0 : _parent$children3.some(child => child.checkedStatus == 'false' || !child.checkedStatus);\n  const hasACheckedChild = (_parent$children4 = parent.children) === null || _parent$children4 === void 0 ? void 0 : _parent$children4.some(child => child.checkedStatus == 'true');\n\n  if (isEveryChildChecked) {\n    parent.checkedStatus = 'true';\n  } else if (hasIntermediate || hasAnUncheckedChild && hasACheckedChild) {\n    parent.checkedStatus = 'indeterminate';\n  } else {\n    parent.checkedStatus = 'false';\n  }\n\n  state.emitItemCheckedChange(parent);\n  notifyParentOfSelection(parent, state);\n};\n\nvar script$1 = defineComponent({\n  inheritAttrs: true,\n  props: {\n    item: {\n      type: Object,\n      required: true\n    },\n    isCheckable: {\n      type: Boolean\n    },\n    canRename: {\n      type: Boolean\n    },\n    selectedItem: {\n      type: Object\n    },\n    treeState: {\n      type: Object\n    }\n  },\n  emits: [\"on-rename\", \"onContextMenu\"],\n\n  setup(props, _ref) {\n    let {\n      emit,\n      attrs\n    } = _ref;\n    const checkbox = ref();\n    const isSelected = computed(() => {\n      var _props$selectedItem;\n\n      return ((_props$selectedItem = props.selectedItem) === null || _props$selectedItem === void 0 ? void 0 : _props$selectedItem.id) == props.item.id;\n    });\n    const parent = computed(() => attrs.parent);\n    onMounted(() => {\n      var _props$treeState, _props$treeState2;\n\n      (_props$treeState = props.treeState) === null || _props$treeState === void 0 ? void 0 : _props$treeState.trackNode(props.item, parent.value);\n\n      if ((_props$treeState2 = props.treeState) !== null && _props$treeState2 !== void 0 && _props$treeState2.isNodeExpanded(props.item.id, props.item.type)) {\n        toggleExpand();\n      }\n    });\n    onUnmounted(() => {\n      var _props$treeState3;\n\n      return (_props$treeState3 = props.treeState) === null || _props$treeState3 === void 0 ? void 0 : _props$treeState3.untrackNode(props.item);\n    });\n\n    const updateCheckState = () => {\n      var _checkbox$value;\n\n      props.item.checkedStatus = ((_checkbox$value = checkbox.value) === null || _checkbox$value === void 0 ? void 0 : _checkbox$value.checked) == true ? 'true' : 'false';\n      props.treeState.emitItemCheckedChange(props.item);\n      notifyParentOfSelection(props.item, props.treeState);\n      cascadeStateToDescendants(props.item, props.treeState);\n    };\n\n    watch(() => props.item.checkedStatus, () => {\n      if (props.item.checkedStatus == 'indeterminate') {\n        checkbox.value.indeterminate = true;\n      } else {\n        checkbox.value.indeterminate = false;\n        checkbox.value.checked = props.item.checkedStatus == 'true' ? true : false;\n      }\n    });\n    const isRenaming = ref(false);\n    const renameBox = ref();\n\n    const beginRenaming = () => {\n      if (!props.canRename) return;\n      isRenaming.value = true;\n      nextTick().then(() => {\n        var _renameBox$value;\n\n        return (_renameBox$value = renameBox.value) === null || _renameBox$value === void 0 ? void 0 : _renameBox$value.focus();\n      });\n    };\n\n    const finishRenaming = () => {\n      // v-on:blur and key(enter) can cause this to fire twice.\n      // this check protects against that.\n      if (!isRenaming) return;\n      emit(\"on-rename\", props.item);\n    };\n\n    const chevron = ref();\n\n    const toggleExpand = () => {\n      var _chevron$value, _document$getElementB;\n\n      (_chevron$value = chevron.value) === null || _chevron$value === void 0 ? void 0 : _chevron$value.classList.toggle(\"rotate-90\");\n      const element = (_document$getElementB = document.getElementById(props.item.id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.getElementsByClassName('node-child');\n      if (!element || !element[0]) return;\n      element[0].classList.toggle('hide');\n    };\n\n    return {\n      toggleExpand,\n      chevron,\n      isSelected,\n      updateCheckState,\n      isRenaming,\n      beginRenaming,\n      finishRenaming,\n      parent,\n      checkbox\n    };\n  }\n\n});\nconst _hoisted_1$1 = {\n  key: 0,\n  class: \"horizontal-dashes\"\n};\nconst _hoisted_2$1 = {\n  key: 0,\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"d-flex\",\n  style: {\n    \"margin-left\": \"0.4em\",\n    \"margin-right\": \"0.4em\"\n  }\n};\nconst _hoisted_4 = {\n  key: 0,\n  for: \"checkbox\"\n};\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"d-flex align-items-center\",\n    onContextmenu: _cache[8] || (_cache[8] = withModifiers($event => _ctx.$emit('onContextMenu', {\n      item: _ctx.item,\n      event: $event\n    }), [\"prevent\"]))\n  }, [_ctx.$attrs.isNested ? (openBlock(), createElementBlock(\"div\", _hoisted_1$1)) : createCommentVNode(\"\", true), createElementVNode(\"span\", {\n    class: normalizeClass([\"chevron-right\", {\n      'hide-chevron': !_ctx.item.children || _ctx.item.children.length < 1\n    }]),\n    ref: \"chevron\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.toggleExpand())\n  }, null, 2), createElementVNode(\"div\", {\n    class: normalizeClass([\"pointer\", {\n      'selected-tree-item': !_ctx.isCheckable && _ctx.isSelected\n    }]),\n    style: {\n      \"width\": \"100%\"\n    }\n  }, [!_ctx.isRenaming ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    onDblclick: _cache[4] || (_cache[4] = function () {\n      return _ctx.beginRenaming && _ctx.beginRenaming(...arguments);\n    })\n  }, [_ctx.isCheckable ? (openBlock(), createElementBlock(\"div\", _hoisted_2$1, [createElementVNode(\"input\", {\n    onContextmenu: _cache[1] || (_cache[1] = withModifiers(() => {}, [\"prevent\"])),\n    onChange: _cache[2] || (_cache[2] = function () {\n      return _ctx.updateCheckState && _ctx.updateCheckState(...arguments);\n    }),\n    type: \"checkbox\",\n    ref: \"checkbox\"\n  }, null, 544), createElementVNode(\"div\", _hoisted_3, [renderSlot(_ctx.$slots, \"icon\"), renderSlot(_ctx.$slots, \"prepend\")]), !_ctx.isRenaming ? (openBlock(), createElementBlock(\"label\", _hoisted_4, toDisplayString(_ctx.item.name), 1)) : createCommentVNode(\"\", true)])) : (openBlock(), createElementBlock(\"div\", {\n    key: 1,\n    class: \"d-flex\",\n    onClick: _cache[3] || (_cache[3] = $event => {\n      var _ctx$treeState;\n\n      return (_ctx$treeState = _ctx.treeState) === null || _ctx$treeState === void 0 ? void 0 : _ctx$treeState.emitItemSelected(_ctx.item);\n    })\n  }, [renderSlot(_ctx.$slots, \"icon\"), renderSlot(_ctx.$slots, \"prepend\"), createElementVNode(\"span\", null, toDisplayString(_ctx.item.name), 1)]))], 32)) : withDirectives((openBlock(), createElementBlock(\"input\", {\n    key: 1,\n    ref: \"rename-box\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.item.name = $event),\n    onKeyup: _cache[6] || (_cache[6] = withKeys(function () {\n      return _ctx.finishRenaming && _ctx.finishRenaming(...arguments);\n    }, [\"enter\"])),\n    onBlur: _cache[7] || (_cache[7] = function () {\n      return _ctx.finishRenaming && _ctx.finishRenaming(...arguments);\n    })\n  }, null, 544)), [[vModelText, _ctx.item.name]])], 2)], 32);\n}\n\nscript$1.render = render$1;\n\nfunction useTreeViewItemMouseActions() {\n  const addHoverClass = event => {\n    const target = event.currentTarget;\n\n    if (target) {\n      target.classList.add('drag-over');\n    }\n  };\n\n  const removeHoverClass = event => {\n    const target = event.currentTarget;\n\n    if (target) {\n      target.classList.remove('drag-over');\n    }\n  };\n\n  const onDragNode = (item, event) => {\n    if (event.dataTransfer) {\n      event.dataTransfer.setData('text/plain', JSON.stringify(item));\n    }\n  };\n\n  const onDropNode = (dropHost, event, isDropValid) => {\n    if (event.dataTransfer) {\n      const droppedNode = JSON.parse(event.dataTransfer.getData('text/plain'));\n      removeHoverClass(event);\n\n      if (droppedNode.id === dropHost.id) {\n        return;\n      }\n\n      if (!isDropValid(droppedNode, dropHost)) return;\n    }\n  };\n\n  return {\n    addHoverClass,\n    removeHoverClass,\n    onDragNode,\n    onDropNode\n  };\n}\n/**\n * Initialises the root state of a tree.\n * @param selectedItem An array of preselected items\n * @param onItemSelected Callback for itemselected\n * @param checkedItems An array of prechecked items\n * @param onItemsChecked Callback for itemChecked\n * @param isNodeExpanded A callback to verify if node is preset to expanded\n * @param itemSelectedEventHandler A callback when an item is selected.\n * @param itemSelectedEventHandler A callback when an item is checked.\n * @returns\n */\n\n\nfunction useGraph(selectedItem, onItemSelected, checkedItems, onItemsChecked, isNodeExpanded, itemSelectedEventHandler, itemCheckedEventHandler) {\n  const childParentLookUp = {};\n\n  const getParent = childId => childParentLookUp[childId];\n\n  const trackNode = (node, parentNode) => childParentLookUp[node.id] = parentNode;\n\n  const untrackNode = node => delete childParentLookUp[node.id];\n\n  const checkedItemsLookup = {};\n  checkedItems === null || checkedItems === void 0 ? void 0 : checkedItems.forEach(node => checkedItemsLookup[node.id] = node);\n\n  const emitItemSelected = node => {\n    if (node === selectedItem) return;\n    itemSelectedEventHandler({\n      item: node,\n      change: 'selected'\n    });\n    selectedItem = node;\n    onItemSelected(node);\n  };\n\n  const emitItemCheckedChange = node => {\n    itemCheckedEventHandler({\n      item: node,\n      change: node.checkedStatus\n    });\n    if (node.checkedStatus == 'true') checkedItemsLookup[node.id] = node;else delete checkedItemsLookup[node.id];\n    onItemsChecked(Object.values(checkedItemsLookup));\n  };\n\n  return {\n    getParent,\n    trackNode,\n    untrackNode,\n    emitItemCheckedChange,\n    emitItemSelected,\n    isNodeExpanded\n  };\n}\n\nvar script = defineComponent({\n  name: 'tree-view',\n  props: {\n    items: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      }\n    },\n    selectedItem: {\n      type: Object\n    },\n    checkedItems: {\n      type: Array\n    },\n    isCheckable: {\n      type: Boolean\n    },\n    hideGuideLines: {\n      type: Boolean,\n      default: false\n    },\n    onDropValidator: {\n      type: Function,\n      default: () => {}\n    },\n    treeState: {\n      type: Object\n    },\n    expandedTypes: {\n      type: Object,\n      default: () => []\n    },\n    expandedIds: {\n      type: Object,\n      default: () => []\n    },\n    expandAll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    'treeview-item': script$1\n  },\n  emits: ['update:selectedItem', 'update:checkedItems', 'onContextMenu', 'onSelect', 'onCheck'],\n\n  setup(props, _ref) {\n    let {\n      emit,\n      attrs\n    } = _ref;\n    const parent = computed(() => attrs.parent);\n    const treeState = ref();\n    var expandedKeys = new Set([...props.expandedTypes, ...props.expandedIds]); // Create a tree state object for only root nodes.\n\n    if (props.treeState != null) {\n      treeState.value = props.treeState;\n    } else {\n      treeState.value = useGraph(props.selectedItem, selectedItem => emit('update:selectedItem', selectedItem), props.checkedItems, checkedItems => emit('update:checkedItems', checkedItems), (id, type) => expandedKeys.has(id) || expandedKeys.has(type) || props.expandAll, eventArguments => emit('onSelect', eventArguments), eventArguments => emit('onCheck', eventArguments));\n    }\n\n    return { ...useTreeViewItemMouseActions(),\n      parent,\n      treeState\n    };\n  }\n\n});\nconst _hoisted_1 = {\n  id: \"explorer\",\n  class: \"explorer tree-item-node-parent\"\n};\nconst _hoisted_2 = [\"id\", \"onDragstart\", \"onDrop\"];\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_treeview_item = resolveComponent(\"treeview-item\");\n\n  const _component_tree_view = resolveComponent(\"tree-view\");\n\n  return openBlock(), createElementBlock(\"ul\", _hoisted_1, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.items, treeViewItem => {\n    return openBlock(), createElementBlock(\"li\", {\n      key: treeViewItem.id,\n      id: treeViewItem.id,\n      draggable: \"\",\n      onDragover: [_cache[1] || (_cache[1] = withModifiers(() => {}, [\"stop\", \"prevent\"])), _cache[3] || (_cache[3] = withModifiers(function () {\n        return _ctx.addHoverClass && _ctx.addHoverClass(...arguments);\n      }, [\"stop\"]))],\n      onDragenter: _cache[2] || (_cache[2] = withModifiers(() => {}, [\"stop\", \"prevent\"])),\n      onDragstart: withModifiers($event => _ctx.onDragNode(treeViewItem, $event), [\"stop\"]),\n      onDrop: withModifiers($event => _ctx.onDropNode(treeViewItem, $event, _ctx.onDropValidator), [\"prevent\", \"stop\"]),\n      class: \"tree-item-node\",\n      onDragleave: _cache[4] || (_cache[4] = withModifiers(function () {\n        return _ctx.removeHoverClass && _ctx.removeHoverClass(...arguments);\n      }, [\"stop\"]))\n    }, [createVNode(_component_treeview_item, {\n      class: \"pointer tree-view-item\",\n      item: treeViewItem,\n      parent: _ctx.parent,\n      isCheckable: _ctx.isCheckable,\n      selectedItem: _ctx.selectedItem,\n      treeState: _ctx.treeState,\n      onContextmenu: withModifiers($event => _ctx.$emit('onContextMenu', {\n        item: treeViewItem,\n        event: $event\n      }), [\"prevent\"])\n    }, {\n      icon: withCtx(() => [renderSlot(_ctx.$slots, \"item-prepend-icon\", normalizeProps(guardReactiveProps(treeViewItem)))]),\n      prepend: withCtx(() => [renderSlot(_ctx.$slots, \"item-prepend\", normalizeProps(guardReactiveProps(treeViewItem)))]),\n      _: 2\n    }, 1032, [\"item\", \"parent\", \"isCheckable\", \"selectedItem\", \"treeState\", \"onContextmenu\"]), treeViewItem.children && treeViewItem.children.length > 0 ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: normalizeClass([\"node-child hide\", {\n        'hide-guidelines': _ctx.hideGuideLines\n      }])\n    }, [createVNode(_component_tree_view, {\n      items: treeViewItem.children,\n      hideGuideLines: _ctx.hideGuideLines,\n      isNested: true,\n      parent: treeViewItem,\n      selectedItem: _ctx.selectedItem,\n      checkedItems: _ctx.checkedItems,\n      treeState: _ctx.treeState,\n      isCheckable: _ctx.isCheckable,\n      onOnContextMenu: _cache[0] || (_cache[0] = $event => _ctx.$emit('onContextMenu', $event))\n    }, createSlots({\n      _: 2\n    }, [renderList(_ctx.$slots, (_, slot) => {\n      return {\n        name: slot,\n        fn: withCtx(props => [renderSlot(_ctx.$slots, slot, normalizeProps(guardReactiveProps(props)))])\n      };\n    })]), 1032, [\"items\", \"hideGuideLines\", \"parent\", \"selectedItem\", \"checkedItems\", \"treeState\", \"isCheckable\"])], 2)) : createCommentVNode(\"\", true)], 40, _hoisted_2);\n  }), 128))]);\n}\n\nscript.render = render;\n\nvar entry_esm = (() => {\n  const installable = script;\n\n  installable.install = app => {\n    app.component('vue3-tree-vue', installable);\n  };\n\n  return installable;\n})();\n\nexport { entry_esm as default };","map":{"version":3,"sources":["/Users/shehrozkapoor/Desktop/FIRST_CARE/firstcare-frontend/node_modules/vue3-tree-vue/dist/vue3-tree-vue.esm.js"],"names":["defineComponent","ref","computed","onMounted","onUnmounted","watch","nextTick","openBlock","createElementBlock","withModifiers","createCommentVNode","createElementVNode","normalizeClass","renderSlot","toDisplayString","withDirectives","withKeys","vModelText","resolveComponent","Fragment","renderList","createVNode","withCtx","normalizeProps","guardReactiveProps","createSlots","cascadeStateToDescendants","item","state","_item$children","children","forEach","child","checkedStatus","emitItemCheckedChange","notifyParentOfSelection","_parent$children","_parent$children2","_parent$children3","_parent$children4","parent","getParent","id","isEveryChildChecked","every","hasIntermediate","some","hasAnUncheckedChild","hasACheckedChild","script$1","inheritAttrs","props","type","Object","required","isCheckable","Boolean","canRename","selectedItem","treeState","emits","setup","_ref","emit","attrs","checkbox","isSelected","_props$selectedItem","_props$treeState","_props$treeState2","trackNode","value","isNodeExpanded","toggleExpand","_props$treeState3","untrackNode","updateCheckState","_checkbox$value","checked","indeterminate","isRenaming","renameBox","beginRenaming","then","_renameBox$value","focus","finishRenaming","chevron","_chevron$value","_document$getElementB","classList","toggle","element","document","getElementById","getElementsByClassName","_hoisted_1$1","key","class","_hoisted_2$1","style","_hoisted_3","_hoisted_4","for","render$1","_ctx","_cache","$props","$setup","$data","$options","onContextmenu","$event","$emit","event","$attrs","isNested","length","onClick","onDblclick","arguments","onChange","$slots","name","_ctx$treeState","emitItemSelected","onKeyup","onBlur","render","useTreeViewItemMouseActions","addHoverClass","target","currentTarget","add","removeHoverClass","remove","onDragNode","dataTransfer","setData","JSON","stringify","onDropNode","dropHost","isDropValid","droppedNode","parse","getData","useGraph","onItemSelected","checkedItems","onItemsChecked","itemSelectedEventHandler","itemCheckedEventHandler","childParentLookUp","childId","node","parentNode","checkedItemsLookup","change","values","script","items","Array","default","hideGuideLines","onDropValidator","Function","expandedTypes","expandedIds","expandAll","components","expandedKeys","Set","has","eventArguments","_hoisted_1","_hoisted_2","_component_treeview_item","_component_tree_view","treeViewItem","draggable","onDragover","onDragenter","onDragstart","onDrop","onDragleave","icon","prepend","_","onOnContextMenu","slot","fn","entry_esm","installable","install","app","component"],"mappings":"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","sourcesContent":["import { defineComponent, ref, computed, onMounted, onUnmounted, watch, nextTick, openBlock, createElementBlock, withModifiers, createCommentVNode, createElementVNode, normalizeClass, renderSlot, toDisplayString, withDirectives, withKeys, vModelText, resolveComponent, Fragment, renderList, createVNode, withCtx, normalizeProps, guardReactiveProps, createSlots } from 'vue';\n\n/**\n * This recursive call is used to traverse a folder looking for all children of a particular type\n * @param parent\n * @param expectedType\n * @returns\n */\nconst cascadeStateToDescendants = (item, state) => {\n  var _item$children;\n\n  (_item$children = item.children) === null || _item$children === void 0 ? void 0 : _item$children.forEach(child => {\n    child.checkedStatus = item.checkedStatus;\n    state.emitItemCheckedChange(child);\n    cascadeStateToDescendants(child, state);\n  });\n};\nconst notifyParentOfSelection = (child, state) => {\n  var _parent$children, _parent$children2, _parent$children3, _parent$children4;\n\n  if (!child) return;\n  const parent = state.getParent(child.id);\n  if (!parent) return;\n  const isEveryChildChecked = (_parent$children = parent.children) === null || _parent$children === void 0 ? void 0 : _parent$children.every(child => child.checkedStatus == 'true');\n  const hasIntermediate = (_parent$children2 = parent.children) === null || _parent$children2 === void 0 ? void 0 : _parent$children2.some(child => child.checkedStatus == 'indeterminate');\n  const hasAnUncheckedChild = (_parent$children3 = parent.children) === null || _parent$children3 === void 0 ? void 0 : _parent$children3.some(child => child.checkedStatus == 'false' || !child.checkedStatus);\n  const hasACheckedChild = (_parent$children4 = parent.children) === null || _parent$children4 === void 0 ? void 0 : _parent$children4.some(child => child.checkedStatus == 'true');\n\n  if (isEveryChildChecked) {\n    parent.checkedStatus = 'true';\n  } else if (hasIntermediate || hasAnUncheckedChild && hasACheckedChild) {\n    parent.checkedStatus = 'indeterminate';\n  } else {\n    parent.checkedStatus = 'false';\n  }\n\n  state.emitItemCheckedChange(parent);\n  notifyParentOfSelection(parent, state);\n};\n\nvar script$1 = defineComponent({\n  inheritAttrs: true,\n  props: {\n    item: {\n      type: Object,\n      required: true\n    },\n    isCheckable: {\n      type: Boolean\n    },\n    canRename: {\n      type: Boolean\n    },\n    selectedItem: {\n      type: Object\n    },\n    treeState: {\n      type: Object\n    }\n  },\n  emits: [\"on-rename\", \"onContextMenu\"],\n\n  setup(props, _ref) {\n    let {\n      emit,\n      attrs\n    } = _ref;\n    const checkbox = ref();\n    const isSelected = computed(() => {\n      var _props$selectedItem;\n\n      return ((_props$selectedItem = props.selectedItem) === null || _props$selectedItem === void 0 ? void 0 : _props$selectedItem.id) == props.item.id;\n    });\n    const parent = computed(() => attrs.parent);\n    onMounted(() => {\n      var _props$treeState, _props$treeState2;\n\n      (_props$treeState = props.treeState) === null || _props$treeState === void 0 ? void 0 : _props$treeState.trackNode(props.item, parent.value);\n\n      if ((_props$treeState2 = props.treeState) !== null && _props$treeState2 !== void 0 && _props$treeState2.isNodeExpanded(props.item.id, props.item.type)) {\n        toggleExpand();\n      }\n    });\n    onUnmounted(() => {\n      var _props$treeState3;\n\n      return (_props$treeState3 = props.treeState) === null || _props$treeState3 === void 0 ? void 0 : _props$treeState3.untrackNode(props.item);\n    });\n\n    const updateCheckState = () => {\n      var _checkbox$value;\n\n      props.item.checkedStatus = ((_checkbox$value = checkbox.value) === null || _checkbox$value === void 0 ? void 0 : _checkbox$value.checked) == true ? 'true' : 'false';\n      props.treeState.emitItemCheckedChange(props.item);\n      notifyParentOfSelection(props.item, props.treeState);\n      cascadeStateToDescendants(props.item, props.treeState);\n    };\n\n    watch(() => props.item.checkedStatus, () => {\n      if (props.item.checkedStatus == 'indeterminate') {\n        checkbox.value.indeterminate = true;\n      } else {\n        checkbox.value.indeterminate = false;\n        checkbox.value.checked = props.item.checkedStatus == 'true' ? true : false;\n      }\n    });\n    const isRenaming = ref(false);\n    const renameBox = ref();\n\n    const beginRenaming = () => {\n      if (!props.canRename) return;\n      isRenaming.value = true;\n      nextTick().then(() => {\n        var _renameBox$value;\n\n        return (_renameBox$value = renameBox.value) === null || _renameBox$value === void 0 ? void 0 : _renameBox$value.focus();\n      });\n    };\n\n    const finishRenaming = () => {\n      // v-on:blur and key(enter) can cause this to fire twice.\n      // this check protects against that.\n      if (!isRenaming) return;\n      emit(\"on-rename\", props.item);\n    };\n\n    const chevron = ref();\n\n    const toggleExpand = () => {\n      var _chevron$value, _document$getElementB;\n\n      (_chevron$value = chevron.value) === null || _chevron$value === void 0 ? void 0 : _chevron$value.classList.toggle(\"rotate-90\");\n      const element = (_document$getElementB = document.getElementById(props.item.id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.getElementsByClassName('node-child');\n      if (!element || !element[0]) return;\n      element[0].classList.toggle('hide');\n    };\n\n    return {\n      toggleExpand,\n      chevron,\n      isSelected,\n      updateCheckState,\n      isRenaming,\n      beginRenaming,\n      finishRenaming,\n      parent,\n      checkbox\n    };\n  }\n\n});\n\nconst _hoisted_1$1 = {\n  key: 0,\n  class: \"horizontal-dashes\"\n};\nconst _hoisted_2$1 = {\n  key: 0,\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"d-flex\",\n  style: {\n    \"margin-left\": \"0.4em\",\n    \"margin-right\": \"0.4em\"\n  }\n};\nconst _hoisted_4 = {\n  key: 0,\n  for: \"checkbox\"\n};\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"d-flex align-items-center\",\n    onContextmenu: _cache[8] || (_cache[8] = withModifiers($event => _ctx.$emit('onContextMenu', {\n      item: _ctx.item,\n      event: $event\n    }), [\"prevent\"]))\n  }, [_ctx.$attrs.isNested ? (openBlock(), createElementBlock(\"div\", _hoisted_1$1)) : createCommentVNode(\"\", true), createElementVNode(\"span\", {\n    class: normalizeClass([\"chevron-right\", {\n      'hide-chevron': !_ctx.item.children || _ctx.item.children.length < 1\n    }]),\n    ref: \"chevron\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.toggleExpand())\n  }, null, 2), createElementVNode(\"div\", {\n    class: normalizeClass([\"pointer\", {\n      'selected-tree-item': !_ctx.isCheckable && _ctx.isSelected\n    }]),\n    style: {\n      \"width\": \"100%\"\n    }\n  }, [!_ctx.isRenaming ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    onDblclick: _cache[4] || (_cache[4] = function () {\n      return _ctx.beginRenaming && _ctx.beginRenaming(...arguments);\n    })\n  }, [_ctx.isCheckable ? (openBlock(), createElementBlock(\"div\", _hoisted_2$1, [createElementVNode(\"input\", {\n    onContextmenu: _cache[1] || (_cache[1] = withModifiers(() => {}, [\"prevent\"])),\n    onChange: _cache[2] || (_cache[2] = function () {\n      return _ctx.updateCheckState && _ctx.updateCheckState(...arguments);\n    }),\n    type: \"checkbox\",\n    ref: \"checkbox\"\n  }, null, 544), createElementVNode(\"div\", _hoisted_3, [renderSlot(_ctx.$slots, \"icon\"), renderSlot(_ctx.$slots, \"prepend\")]), !_ctx.isRenaming ? (openBlock(), createElementBlock(\"label\", _hoisted_4, toDisplayString(_ctx.item.name), 1)) : createCommentVNode(\"\", true)])) : (openBlock(), createElementBlock(\"div\", {\n    key: 1,\n    class: \"d-flex\",\n    onClick: _cache[3] || (_cache[3] = $event => {\n      var _ctx$treeState;\n\n      return (_ctx$treeState = _ctx.treeState) === null || _ctx$treeState === void 0 ? void 0 : _ctx$treeState.emitItemSelected(_ctx.item);\n    })\n  }, [renderSlot(_ctx.$slots, \"icon\"), renderSlot(_ctx.$slots, \"prepend\"), createElementVNode(\"span\", null, toDisplayString(_ctx.item.name), 1)]))], 32)) : withDirectives((openBlock(), createElementBlock(\"input\", {\n    key: 1,\n    ref: \"rename-box\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.item.name = $event),\n    onKeyup: _cache[6] || (_cache[6] = withKeys(function () {\n      return _ctx.finishRenaming && _ctx.finishRenaming(...arguments);\n    }, [\"enter\"])),\n    onBlur: _cache[7] || (_cache[7] = function () {\n      return _ctx.finishRenaming && _ctx.finishRenaming(...arguments);\n    })\n  }, null, 544)), [[vModelText, _ctx.item.name]])], 2)], 32);\n}\n\nscript$1.render = render$1;\n\nfunction useTreeViewItemMouseActions() {\n  const addHoverClass = event => {\n    const target = event.currentTarget;\n\n    if (target) {\n      target.classList.add('drag-over');\n    }\n  };\n\n  const removeHoverClass = event => {\n    const target = event.currentTarget;\n\n    if (target) {\n      target.classList.remove('drag-over');\n    }\n  };\n\n  const onDragNode = (item, event) => {\n    if (event.dataTransfer) {\n      event.dataTransfer.setData('text/plain', JSON.stringify(item));\n    }\n  };\n\n  const onDropNode = (dropHost, event, isDropValid) => {\n    if (event.dataTransfer) {\n      const droppedNode = JSON.parse(event.dataTransfer.getData('text/plain'));\n      removeHoverClass(event);\n\n      if (droppedNode.id === dropHost.id) {\n        return;\n      }\n\n      if (!isDropValid(droppedNode, dropHost)) return;\n    }\n  };\n\n  return {\n    addHoverClass,\n    removeHoverClass,\n    onDragNode,\n    onDropNode\n  };\n}\n\n/**\n * Initialises the root state of a tree.\n * @param selectedItem An array of preselected items\n * @param onItemSelected Callback for itemselected\n * @param checkedItems An array of prechecked items\n * @param onItemsChecked Callback for itemChecked\n * @param isNodeExpanded A callback to verify if node is preset to expanded\n * @param itemSelectedEventHandler A callback when an item is selected.\n * @param itemSelectedEventHandler A callback when an item is checked.\n * @returns\n */\nfunction useGraph(selectedItem, onItemSelected, checkedItems, onItemsChecked, isNodeExpanded, itemSelectedEventHandler, itemCheckedEventHandler) {\n  const childParentLookUp = {};\n\n  const getParent = childId => childParentLookUp[childId];\n\n  const trackNode = (node, parentNode) => childParentLookUp[node.id] = parentNode;\n\n  const untrackNode = node => delete childParentLookUp[node.id];\n\n  const checkedItemsLookup = {};\n  checkedItems === null || checkedItems === void 0 ? void 0 : checkedItems.forEach(node => checkedItemsLookup[node.id] = node);\n\n  const emitItemSelected = node => {\n    if (node === selectedItem) return;\n    itemSelectedEventHandler({\n      item: node,\n      change: 'selected'\n    });\n    selectedItem = node;\n    onItemSelected(node);\n  };\n\n  const emitItemCheckedChange = node => {\n    itemCheckedEventHandler({\n      item: node,\n      change: node.checkedStatus\n    });\n    if (node.checkedStatus == 'true') checkedItemsLookup[node.id] = node;else delete checkedItemsLookup[node.id];\n    onItemsChecked(Object.values(checkedItemsLookup));\n  };\n\n  return {\n    getParent,\n    trackNode,\n    untrackNode,\n    emitItemCheckedChange,\n    emitItemSelected,\n    isNodeExpanded\n  };\n}\n\nvar script = defineComponent({\n  name: 'tree-view',\n  props: {\n    items: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      }\n    },\n    selectedItem: {\n      type: Object\n    },\n    checkedItems: {\n      type: Array\n    },\n    isCheckable: {\n      type: Boolean\n    },\n    hideGuideLines: {\n      type: Boolean,\n      default: false\n    },\n    onDropValidator: {\n      type: Function,\n      default: () => {\n      }\n    },\n    treeState: {\n      type: Object\n    },\n    expandedTypes: {\n      type: Object,\n      default: () => []\n    },\n    expandedIds: {\n      type: Object,\n      default: () => []\n    },\n    expandAll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    'treeview-item': script$1\n  },\n  emits: ['update:selectedItem', 'update:checkedItems', 'onContextMenu', 'onSelect', 'onCheck'],\n\n  setup(props, _ref) {\n    let {\n      emit,\n      attrs\n    } = _ref;\n    const parent = computed(() => attrs.parent);\n    const treeState = ref();\n    var expandedKeys = new Set([...props.expandedTypes, ...props.expandedIds]); // Create a tree state object for only root nodes.\n\n    if (props.treeState != null) {\n      treeState.value = props.treeState;\n    } else {\n      treeState.value = useGraph(props.selectedItem, selectedItem => emit('update:selectedItem', selectedItem), props.checkedItems, checkedItems => emit('update:checkedItems', checkedItems), (id, type) => expandedKeys.has(id) || expandedKeys.has(type) || props.expandAll, eventArguments => emit('onSelect', eventArguments), eventArguments => emit('onCheck', eventArguments));\n    }\n\n    return { ...useTreeViewItemMouseActions(),\n      parent,\n      treeState\n    };\n  }\n\n});\n\nconst _hoisted_1 = {\n  id: \"explorer\",\n  class: \"explorer tree-item-node-parent\"\n};\nconst _hoisted_2 = [\"id\", \"onDragstart\", \"onDrop\"];\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_treeview_item = resolveComponent(\"treeview-item\");\n\n  const _component_tree_view = resolveComponent(\"tree-view\");\n\n  return openBlock(), createElementBlock(\"ul\", _hoisted_1, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.items, treeViewItem => {\n    return openBlock(), createElementBlock(\"li\", {\n      key: treeViewItem.id,\n      id: treeViewItem.id,\n      draggable: \"\",\n      onDragover: [_cache[1] || (_cache[1] = withModifiers(() => {}, [\"stop\", \"prevent\"])), _cache[3] || (_cache[3] = withModifiers(function () {\n        return _ctx.addHoverClass && _ctx.addHoverClass(...arguments);\n      }, [\"stop\"]))],\n      onDragenter: _cache[2] || (_cache[2] = withModifiers(() => {}, [\"stop\", \"prevent\"])),\n      onDragstart: withModifiers($event => _ctx.onDragNode(treeViewItem, $event), [\"stop\"]),\n      onDrop: withModifiers($event => _ctx.onDropNode(treeViewItem, $event, _ctx.onDropValidator), [\"prevent\", \"stop\"]),\n      class: \"tree-item-node\",\n      onDragleave: _cache[4] || (_cache[4] = withModifiers(function () {\n        return _ctx.removeHoverClass && _ctx.removeHoverClass(...arguments);\n      }, [\"stop\"]))\n    }, [createVNode(_component_treeview_item, {\n      class: \"pointer tree-view-item\",\n      item: treeViewItem,\n      parent: _ctx.parent,\n      isCheckable: _ctx.isCheckable,\n      selectedItem: _ctx.selectedItem,\n      treeState: _ctx.treeState,\n      onContextmenu: withModifiers($event => _ctx.$emit('onContextMenu', {\n        item: treeViewItem,\n        event: $event\n      }), [\"prevent\"])\n    }, {\n      icon: withCtx(() => [renderSlot(_ctx.$slots, \"item-prepend-icon\", normalizeProps(guardReactiveProps(treeViewItem)))]),\n      prepend: withCtx(() => [renderSlot(_ctx.$slots, \"item-prepend\", normalizeProps(guardReactiveProps(treeViewItem)))]),\n      _: 2\n    }, 1032, [\"item\", \"parent\", \"isCheckable\", \"selectedItem\", \"treeState\", \"onContextmenu\"]), treeViewItem.children && treeViewItem.children.length > 0 ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: normalizeClass([\"node-child hide\", {\n        'hide-guidelines': _ctx.hideGuideLines\n      }])\n    }, [createVNode(_component_tree_view, {\n      items: treeViewItem.children,\n      hideGuideLines: _ctx.hideGuideLines,\n      isNested: true,\n      parent: treeViewItem,\n      selectedItem: _ctx.selectedItem,\n      checkedItems: _ctx.checkedItems,\n      treeState: _ctx.treeState,\n      isCheckable: _ctx.isCheckable,\n      onOnContextMenu: _cache[0] || (_cache[0] = $event => _ctx.$emit('onContextMenu', $event))\n    }, createSlots({\n      _: 2\n    }, [renderList(_ctx.$slots, (_, slot) => {\n      return {\n        name: slot,\n        fn: withCtx(props => [renderSlot(_ctx.$slots, slot, normalizeProps(guardReactiveProps(props)))])\n      };\n    })]), 1032, [\"items\", \"hideGuideLines\", \"parent\", \"selectedItem\", \"checkedItems\", \"treeState\", \"isCheckable\"])], 2)) : createCommentVNode(\"\", true)], 40, _hoisted_2);\n  }), 128))]);\n}\n\nscript.render = render;\n\nvar entry_esm = (() => {\n  const installable = script;\n\n  installable.install = app => {\n    app.component('vue3-tree-vue', installable);\n  };\n\n  return installable;\n})();\n\nexport { entry_esm as default };\n"]},"metadata":{},"sourceType":"module"}