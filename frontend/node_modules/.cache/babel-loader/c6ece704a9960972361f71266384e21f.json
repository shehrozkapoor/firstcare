{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { useVelocity } from \"../../composables/touch.mjs\";\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue';\nexport function useTouch(_ref) {\n  let {\n    isActive,\n    isTemporary,\n    width,\n    touchless,\n    position\n  } = _ref;\n  onMounted(() => {\n    window.addEventListener('touchstart', onTouchstart, {\n      passive: true\n    });\n    window.addEventListener('touchmove', onTouchmove, {\n      passive: false\n    });\n    window.addEventListener('touchend', onTouchend, {\n      passive: true\n    });\n  });\n  onBeforeUnmount(() => {\n    window.removeEventListener('touchstart', onTouchstart);\n    window.removeEventListener('touchmove', onTouchmove);\n    window.removeEventListener('touchend', onTouchend);\n  });\n  const isHorizontal = computed(() => position.value !== 'bottom');\n  const {\n    addMovement,\n    endTouch,\n    getVelocity\n  } = useVelocity();\n  let maybeDragging = false;\n  const isDragging = ref(false);\n  const dragProgress = ref(0);\n  const offset = ref(0);\n  let start;\n\n  function getOffset(pos, active) {\n    return (position.value === 'left' ? pos : position.value === 'right' ? document.documentElement.clientWidth - pos : position.value === 'bottom' ? document.documentElement.clientHeight - pos : oops()) - (active ? width.value : 0);\n  }\n\n  function getProgress(pos) {\n    let limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const progress = position.value === 'left' ? (pos - offset.value) / width.value : position.value === 'right' ? (document.documentElement.clientWidth - pos - offset.value) / width.value : position.value === 'bottom' ? (document.documentElement.clientHeight - pos - offset.value) / width.value : oops();\n    return limit ? Math.max(0, Math.min(1, progress)) : progress;\n  }\n\n  function onTouchstart(e) {\n    if (touchless.value) return;\n    const touchX = e.changedTouches[0].clientX;\n    const touchY = e.changedTouches[0].clientY;\n    const touchZone = 25;\n    const inTouchZone = position.value === 'left' ? touchX < touchZone : position.value === 'right' ? touchX > document.documentElement.clientWidth - touchZone : position.value === 'bottom' ? touchY > document.documentElement.clientHeight - touchZone : oops();\n    const inElement = isActive.value && (position.value === 'left' ? touchX < width.value : position.value === 'right' ? touchX > document.documentElement.clientWidth - width.value : position.value === 'bottom' ? touchY > document.documentElement.clientHeight - width.value : oops());\n\n    if (inTouchZone || inElement || isActive.value && isTemporary.value) {\n      maybeDragging = true;\n      start = [touchX, touchY];\n      offset.value = getOffset(isHorizontal.value ? touchX : touchY, isActive.value);\n      dragProgress.value = getProgress(isHorizontal.value ? touchX : touchY);\n      endTouch(e);\n      addMovement(e);\n    }\n  }\n\n  function onTouchmove(e) {\n    const touchX = e.changedTouches[0].clientX;\n    const touchY = e.changedTouches[0].clientY;\n\n    if (maybeDragging) {\n      if (!e.cancelable) {\n        maybeDragging = false;\n        return;\n      }\n\n      const dx = Math.abs(touchX - start[0]);\n      const dy = Math.abs(touchY - start[1]);\n      const thresholdMet = isHorizontal.value ? dx > dy && dx > 3 : dy > dx && dy > 3;\n\n      if (thresholdMet) {\n        isDragging.value = true;\n        maybeDragging = false;\n      } else if ((isHorizontal.value ? dy : dx) > 3) {\n        maybeDragging = false;\n      }\n    }\n\n    if (!isDragging.value) return;\n    e.preventDefault();\n    addMovement(e);\n    const progress = getProgress(isHorizontal.value ? touchX : touchY, false);\n    dragProgress.value = Math.max(0, Math.min(1, progress));\n\n    if (progress > 1) {\n      offset.value = getOffset(isHorizontal.value ? touchX : touchY, true);\n    } else if (progress < 0) {\n      offset.value = getOffset(isHorizontal.value ? touchX : touchY, false);\n    }\n  }\n\n  function onTouchend(e) {\n    maybeDragging = false;\n    if (!isDragging.value) return;\n    addMovement(e);\n    isDragging.value = false;\n    const velocity = getVelocity(e.changedTouches[0].identifier);\n    const vx = Math.abs(velocity.x);\n    const vy = Math.abs(velocity.y);\n    const thresholdMet = isHorizontal.value ? vx > vy && vx > 400 : vy > vx && vy > 3;\n\n    if (thresholdMet) {\n      isActive.value = velocity.direction === ({\n        left: 'right',\n        right: 'left',\n        bottom: 'up'\n      }[position.value] || oops());\n    } else {\n      isActive.value = dragProgress.value > 0.5;\n    }\n  }\n\n  const dragStyles = computed(() => {\n    return isDragging.value ? {\n      transform: position.value === 'left' ? `translateX(calc(-100% + ${dragProgress.value * width.value}px))` : position.value === 'right' ? `translateX(calc(100% - ${dragProgress.value * width.value}px))` : position.value === 'bottom' ? `translateY(calc(100% - ${dragProgress.value * width.value}px))` : oops(),\n      transition: 'none'\n    } : undefined;\n  });\n  return {\n    isDragging,\n    dragProgress,\n    dragStyles\n  };\n}\n\nfunction oops() {\n  throw new Error();\n}","map":{"version":3,"mappings":"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","names":["useVelocity","computed","onBeforeUnmount","onMounted","ref","useTouch","isActive","isTemporary","width","touchless","position","_ref","window","addEventListener","onTouchstart","passive","onTouchmove","onTouchend","removeEventListener","isHorizontal","value","addMovement","endTouch","getVelocity","maybeDragging","isDragging","dragProgress","offset","start","getOffset","pos","active","document","documentElement","clientWidth","clientHeight","oops","getProgress","limit","progress","Math","max","min","e","touchX","changedTouches","clientX","touchY","clientY","touchZone","inTouchZone","inElement","cancelable","dx","abs","dy","thresholdMet","preventDefault","velocity","identifier","vx","x","vy","y","direction","left","right","bottom","dragStyles","transform","transition","undefined","Error"],"sources":["../../../src/components/VNavigationDrawer/touch.ts"],"sourcesContent":["import { useVelocity } from '@/composables/touch'\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue'\nimport type { Ref } from 'vue'\n\nexport function useTouch ({ isActive, isTemporary, width, touchless, position }: {\n  isActive: Ref<boolean>\n  isTemporary: Ref<boolean>\n  width: Ref<number>\n  touchless: Ref<boolean>\n  position: Ref<'left' | 'right' | 'bottom'>\n}) {\n  onMounted(() => {\n    window.addEventListener('touchstart', onTouchstart, { passive: true })\n    window.addEventListener('touchmove', onTouchmove, { passive: false })\n    window.addEventListener('touchend', onTouchend, { passive: true })\n  })\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('touchstart', onTouchstart)\n    window.removeEventListener('touchmove', onTouchmove)\n    window.removeEventListener('touchend', onTouchend)\n  })\n\n  const isHorizontal = computed(() => position.value !== 'bottom')\n\n  const { addMovement, endTouch, getVelocity } = useVelocity()\n  let maybeDragging = false\n  const isDragging = ref(false)\n  const dragProgress = ref(0)\n  const offset = ref(0)\n  let start: [number, number] | undefined\n\n  function getOffset (pos: number, active: boolean): number {\n    return (\n      position.value === 'left' ? pos\n      : position.value === 'right' ? document.documentElement.clientWidth - pos\n      : position.value === 'bottom' ? document.documentElement.clientHeight - pos\n      : oops()\n    ) - (active ? width.value : 0)\n  }\n\n  function getProgress (pos: number, limit = true): number {\n    const progress = (\n      position.value === 'left' ? (pos - offset.value) / width.value\n      : position.value === 'right' ? (document.documentElement.clientWidth - pos - offset.value) / width.value\n      : position.value === 'bottom' ? (document.documentElement.clientHeight - pos - offset.value) / width.value\n      : oops()\n    )\n    return limit ? Math.max(0, Math.min(1, progress)) : progress\n  }\n\n  function onTouchstart (e: TouchEvent) {\n    if (touchless.value) return\n\n    const touchX = e.changedTouches[0].clientX\n    const touchY = e.changedTouches[0].clientY\n\n    const touchZone = 25\n    const inTouchZone: boolean =\n      position.value === 'left' ? touchX < touchZone\n      : position.value === 'right' ? touchX > document.documentElement.clientWidth - touchZone\n      : position.value === 'bottom' ? touchY > document.documentElement.clientHeight - touchZone\n      : oops()\n\n    const inElement: boolean = isActive.value && (\n      position.value === 'left' ? touchX < width.value\n      : position.value === 'right' ? touchX > document.documentElement.clientWidth - width.value\n      : position.value === 'bottom' ? touchY > document.documentElement.clientHeight - width.value\n      : oops()\n    )\n\n    if (\n      inTouchZone ||\n      inElement ||\n      (isActive.value && isTemporary.value)\n    ) {\n      maybeDragging = true\n      start = [touchX, touchY]\n\n      offset.value = getOffset(isHorizontal.value ? touchX : touchY, isActive.value)\n      dragProgress.value = getProgress(isHorizontal.value ? touchX : touchY)\n\n      endTouch(e)\n      addMovement(e)\n    }\n  }\n\n  function onTouchmove (e: TouchEvent) {\n    const touchX = e.changedTouches[0].clientX\n    const touchY = e.changedTouches[0].clientY\n\n    if (maybeDragging) {\n      if (!e.cancelable) {\n        maybeDragging = false\n        return\n      }\n\n      const dx = Math.abs(touchX - start![0])\n      const dy = Math.abs(touchY - start![1])\n\n      const thresholdMet = isHorizontal.value\n        ? dx > dy && dx > 3\n        : dy > dx && dy > 3\n\n      if (thresholdMet) {\n        isDragging.value = true\n        maybeDragging = false\n      } else if ((isHorizontal.value ? dy : dx) > 3) {\n        maybeDragging = false\n      }\n    }\n\n    if (!isDragging.value) return\n\n    e.preventDefault()\n    addMovement(e)\n\n    const progress = getProgress(isHorizontal.value ? touchX : touchY, false)\n    dragProgress.value = Math.max(0, Math.min(1, progress))\n\n    if (progress > 1) {\n      offset.value = getOffset(isHorizontal.value ? touchX : touchY, true)\n    } else if (progress < 0) {\n      offset.value = getOffset(isHorizontal.value ? touchX : touchY, false)\n    }\n  }\n\n  function onTouchend (e: TouchEvent) {\n    maybeDragging = false\n\n    if (!isDragging.value) return\n\n    addMovement(e)\n\n    isDragging.value = false\n\n    const velocity = getVelocity(e.changedTouches[0].identifier)\n    const vx = Math.abs(velocity.x)\n    const vy = Math.abs(velocity.y)\n    const thresholdMet = isHorizontal.value\n      ? vx > vy && vx > 400\n      : vy > vx && vy > 3\n\n    if (thresholdMet) {\n      isActive.value = velocity.direction === ({\n        left: 'right',\n        right: 'left',\n        bottom: 'up',\n      }[position.value] || oops())\n    } else {\n      isActive.value = dragProgress.value > 0.5\n    }\n  }\n\n  const dragStyles = computed(() => {\n    return isDragging.value ? {\n      transform:\n        position.value === 'left' ? `translateX(calc(-100% + ${dragProgress.value * width.value}px))`\n        : position.value === 'right' ? `translateX(calc(100% - ${dragProgress.value * width.value}px))`\n        : position.value === 'bottom' ? `translateY(calc(100% - ${dragProgress.value * width.value}px))`\n        : oops(),\n      transition: 'none',\n    } : undefined\n  })\n\n  return {\n    isDragging,\n    dragProgress,\n    dragStyles,\n  }\n}\n\nfunction oops (): never {\n  throw new Error()\n}\n"]},"metadata":{},"sourceType":"module"}